{"ast":null,"code":"export default {\n  name: 'EnseignantComponent',\n  data() {\n    return {\n      selected: null,\n      list: [{\n        value: \"enseignant\",\n        text: \"Par Enseignant\"\n      }, {\n        value: \"thème\",\n        text: \"Par Thème\"\n      }, {\n        value: \"spécialité\",\n        text: \"Par Spécialité\"\n      }],\n      thèmes: [],\n      fields: [\"Theme\", \"Specialite\", \"actions\"],\n      modal: false,\n      proposedTheme: {\n        Theme: '',\n        Specialite: ''\n      },\n      isEditing: false,\n      editedThemeId: null\n    };\n  },\n  mounted() {\n    this.fetchThemes();\n  },\n  methods: {\n    fetchThemes() {\n      fetch('http://127.0.0.1:8000/enseignant/liste-themes/').then(response => response.json()).then(data => {\n        this.thèmes = data.themes;\n      }).catch(error => {\n        console.error('Une erreur s\\'est produite lors de la récupération des thèmes:', error);\n      });\n    },\n    deleteRow(id) {\n      this.deleteTheme(id);\n    },\n    proposer() {\n      this.modal = true;\n    },\n    submitProposedTheme() {\n      if (this.isEditing) {\n        fetch(`http://127.0.0.1:8000/enseignant/modifier-theme/${this.editedThemeId}/`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.proposedTheme)\n        }).then(response => response.json()).then(data => {\n          if (data.success) {\n            this.fetchThemes();\n            this.modal = false;\n            this.isEditing = false;\n            this.editedThemeId = null;\n            this.proposedTheme = {\n              Theme: '',\n              Specialite: ''\n            };\n          } else {\n            console.error('Erreur lors de la mise à jour du thème:', data.message);\n          }\n        }).catch(error => {\n          console.error('Une erreur s\\'est produite lors de la mise à jour du thème:', error);\n        });\n      } else {\n        fetch('http://127.0.0.1:8000/enseignant/proposer_theme/', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.proposedTheme)\n        }).then(response => response.json()).then(data => {\n          if (data.success) {\n            this.fetchThemes();\n            this.modal = false;\n            this.proposedTheme = {\n              Theme: '',\n              Specialite: ''\n            };\n          } else {\n            console.error('Erreur lors de la proposition du thème:', data.message);\n          }\n        }).catch(error => {\n          console.error('Une erreur s\\'est produite lors de la proposition du thème:', error);\n        });\n      }\n    },\n    modifyTheme(theme) {\n      this.isEditing = true;\n      this.editedThemeId = theme.id;\n      this.proposedTheme = {\n        ...theme\n      };\n      this.modal = true;\n    },\n    deleteTheme(themeId) {\n      fetch(`http://127.0.0.1:8000/enseignant/supprimer-theme/${themeId}/`, {\n        method: 'DELETE'\n      }).then(response => response.json()).then(data => {\n        if (data.success) {\n          this.fetchThemes();\n        } else {\n          console.error('Erreur lors de la suppression du thème:', data.message);\n        }\n      }).catch(error => {\n        console.error('Une erreur s\\'est produite lors de la suppression du thème:', error);\n      });\n    },\n    resetModal() {\n      this.proposedTheme = {\n        Theme: '',\n        Specialite: ''\n      };\n    },\n    handleOk() {\n      console.log('Modal fermé');\n    }\n  }\n};","map":{"version":3,"names":["name","data","selected","list","value","text","thèmes","fields","modal","proposedTheme","Theme","Specialite","isEditing","editedThemeId","mounted","fetchThemes","methods","fetch","then","response","json","themes","catch","error","console","deleteRow","id","deleteTheme","proposer","submitProposedTheme","method","headers","body","JSON","stringify","success","message","modifyTheme","theme","themeId","resetModal","handleOk","log"],"sources":["src/views/Enseignant.vue"],"sourcesContent":["<template>\n  <b-form>\n    <b-container>\n      <b-navbar toggleable=\"sm\" variant=\"secondary\">\n        <b-navbar-brand class=\"mb-2\" href=\"/planning\">Planning</b-navbar-brand>\n        <b-navbar-brand class=\"mb-2\" href=\"/nondispo\">Saisir la non Disponibilité</b-navbar-brand>\n        <b-navbar-brand class=\"mb-2\" href=\"/listebinomes\">Liste des binômes</b-navbar-brand>\n        <b-navbar-nav type=\"dark\" class=\"ml-auto\">\n          <b-nav-form class=\"d-flex align-items-center\" text=\"Lang\">\n            <b-form-select v-model=\"selected\" :options=\"list\" value-field=\"value\" text-field=\"text\" class=\"mr-sm-2\" style=\"border-color: black\"></b-form-select>\n          </b-nav-form>\n          <b-nav-form class=\"d-flex align-items-center\" text=\"Lang\">\n            <b-button size=\"sm\" class=\"my-2 my-sm-0\" type=\"submit\" variant=\"dark\">Rechercher</b-button>\n          </b-nav-form>\n        </b-navbar-nav>\n      </b-navbar>\n      <br><br>\n      <div>\n        <b-form-group label=\"Liste des thèmes proposés :\" style=\"font-weight: bold\" label-cols-lg=\"13\" label-size=\"lg\">\n        </b-form-group>\n      </div>\n      <br><br><br>\n      <div>\n        <b-table :items=\"thèmes\" :fields=\"fields\">\n          <template #cell(actions)=\"data\">\n            <b-button variant=\"secondary\" size=\"sm\" class=\"mr-1\" @click=\"modifyTheme(data.item)\">Modifier</b-button>\n            <b-button @click=\"deleteRow(data.item.id)\" variant=\"danger\" size=\"sm\" class=\"mr-2\">Supprimer</b-button>\n          </template>\n        </b-table>\n      </div>\n      <b-button variant=\"primary\" size=\"lg\" class=\"mr-1\" @click=\"proposer()\">Proposer un Thème</b-button>\n      <b-modal id=\"modal-1\" v-model=\"modal\" ref=\"modal\" size=\"lg\" title=\"Proposer un Thème\" @show=\"resetModal\" @hidden=\"resetModal\" @ok=\"handleOk\" header-bg-variant=\"primary\" header-text-variant=\"light\">\n        <b-form @submit.prevent=\"submitProposedTheme\">\n          <b-form-group label=\"Nom du Thème:\" label-for=\"themeInput\">\n            <b-form-input id=\"themeInput\" v-model=\"proposedTheme.Theme\" required></b-form-input>\n          </b-form-group>\n          <b-form-group label=\"Spécialité:\" label-for=\"specialiteInput\">\n            <b-form-input id=\"specialiteInput\" v-model=\"proposedTheme.Specialite\" required></b-form-input>\n          </b-form-group>\n          <b-button type=\"submit\" variant=\"primary\">{{ isEditing ? 'Modifier' : 'Proposer' }}</b-button>\n        </b-form>\n      </b-modal>\n    </b-container>\n  </b-form>\n</template>\n\n<script>\nexport default {\n  name: 'EnseignantComponent',\n  data() {\n    return {\n      selected: null,\n      list: [\n        { value: \"enseignant\", text: \"Par Enseignant\" },\n        { value: \"thème\", text: \"Par Thème\" },\n        { value: \"spécialité\", text: \"Par Spécialité\" },\n      ],\n      thèmes: [],\n      fields: [\"Theme\", \"Specialite\", \"actions\"],\n      modal: false,\n      proposedTheme: { Theme: '', Specialite: '' },\n      isEditing: false,\n      editedThemeId: null,\n    }\n  },\n  mounted() {\n    this.fetchThemes();\n  },\n  methods: {\n    fetchThemes() {\n      fetch('http://127.0.0.1:8000/enseignant/liste-themes/')\n        .then(response => response.json())\n        .then(data => {\n          this.thèmes = data.themes;\n        })\n        .catch(error => {\n          console.error('Une erreur s\\'est produite lors de la récupération des thèmes:', error);\n        });\n    },\n    deleteRow(id) {\n      this.deleteTheme(id);\n    },\n    proposer() {\n      this.modal = true;\n    },\n    submitProposedTheme() {\n      if (this.isEditing) {\n        fetch(`http://127.0.0.1:8000/enseignant/modifier-theme/${this.editedThemeId}/`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.proposedTheme)\n        })\n        .then(response => response.json())\n        .then(data => {\n          if (data.success) {\n            this.fetchThemes();\n            this.modal = false;\n            this.isEditing = false;\n            this.editedThemeId = null;\n            this.proposedTheme = { Theme: '', Specialite: '' };\n          } else {\n            console.error('Erreur lors de la mise à jour du thème:', data.message);\n          }\n        })\n        .catch(error => {\n          console.error('Une erreur s\\'est produite lors de la mise à jour du thème:', error);\n        });\n      } else {\n        fetch('http://127.0.0.1:8000/enseignant/proposer_theme/', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.proposedTheme)\n        })\n        .then(response => response.json())\n        .then(data => {\n          if (data.success) {\n            this.fetchThemes();\n            this.modal = false;\n            this.proposedTheme = { Theme: '', Specialite: '' };\n          } else {\n            console.error('Erreur lors de la proposition du thème:', data.message);\n          }\n        })\n        .catch(error => {\n          console.error('Une erreur s\\'est produite lors de la proposition du thème:', error);\n        });\n      }\n    },\n    modifyTheme(theme) {\n      this.isEditing = true;\n      this.editedThemeId = theme.id;\n      this.proposedTheme = { ...theme };\n      this.modal = true;\n    },\n    deleteTheme(themeId) {\n      fetch(`http://127.0.0.1:8000/enseignant/supprimer-theme/${themeId}/`, {\n        method: 'DELETE'\n      })\n      .then(response => response.json())\n      .then(data => {\n        if (data.success) {\n          this.fetchThemes();\n        } else {\n          console.error('Erreur lors de la suppression du thème:', data.message);\n        }\n      })\n      .catch(error => {\n        console.error('Une erreur s\\'est produite lors de la suppression du thème:', error);\n      });\n    },\n    resetModal() {\n      this.proposedTheme = { Theme: '', Specialite: '' };\n    },\n    handleOk() {\n      console.log('Modal fermé');\n    }\n  }\n}\n</script>\n\n<style>\n/*\n"],"mappings":"AA+CA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,IAAA,GACA;QAAAC,KAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,IAAA;MAAA,EACA;MACAC,MAAA;MACAC,MAAA;MACAC,KAAA;MACAC,aAAA;QAAAC,KAAA;QAAAC,UAAA;MAAA;MACAC,SAAA;MACAC,aAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACAD,YAAA;MACAE,KAAA,mDACAC,IAAA,CAAAC,QAAA,IAAAA,QAAA,CAAAC,IAAA,IACAF,IAAA,CAAAjB,IAAA;QACA,KAAAK,MAAA,GAAAL,IAAA,CAAAoB,MAAA;MACA,GACAC,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,mEAAAA,KAAA;MACA;IACA;IACAE,UAAAC,EAAA;MACA,KAAAC,WAAA,CAAAD,EAAA;IACA;IACAE,SAAA;MACA,KAAApB,KAAA;IACA;IACAqB,oBAAA;MACA,SAAAjB,SAAA;QACAK,KAAA,yDAAAJ,aAAA;UACAiB,MAAA;UACAC,OAAA;YACA;UACA;UACAC,IAAA,EAAAC,IAAA,CAAAC,SAAA,MAAAzB,aAAA;QACA,GACAS,IAAA,CAAAC,QAAA,IAAAA,QAAA,CAAAC,IAAA,IACAF,IAAA,CAAAjB,IAAA;UACA,IAAAA,IAAA,CAAAkC,OAAA;YACA,KAAApB,WAAA;YACA,KAAAP,KAAA;YACA,KAAAI,SAAA;YACA,KAAAC,aAAA;YACA,KAAAJ,aAAA;cAAAC,KAAA;cAAAC,UAAA;YAAA;UACA;YACAa,OAAA,CAAAD,KAAA,4CAAAtB,IAAA,CAAAmC,OAAA;UACA;QACA,GACAd,KAAA,CAAAC,KAAA;UACAC,OAAA,CAAAD,KAAA,gEAAAA,KAAA;QACA;MACA;QACAN,KAAA;UACAa,MAAA;UACAC,OAAA;YACA;UACA;UACAC,IAAA,EAAAC,IAAA,CAAAC,SAAA,MAAAzB,aAAA;QACA,GACAS,IAAA,CAAAC,QAAA,IAAAA,QAAA,CAAAC,IAAA,IACAF,IAAA,CAAAjB,IAAA;UACA,IAAAA,IAAA,CAAAkC,OAAA;YACA,KAAApB,WAAA;YACA,KAAAP,KAAA;YACA,KAAAC,aAAA;cAAAC,KAAA;cAAAC,UAAA;YAAA;UACA;YACAa,OAAA,CAAAD,KAAA,4CAAAtB,IAAA,CAAAmC,OAAA;UACA;QACA,GACAd,KAAA,CAAAC,KAAA;UACAC,OAAA,CAAAD,KAAA,gEAAAA,KAAA;QACA;MACA;IACA;IACAc,YAAAC,KAAA;MACA,KAAA1B,SAAA;MACA,KAAAC,aAAA,GAAAyB,KAAA,CAAAZ,EAAA;MACA,KAAAjB,aAAA;QAAA,GAAA6B;MAAA;MACA,KAAA9B,KAAA;IACA;IACAmB,YAAAY,OAAA;MACAtB,KAAA,qDAAAsB,OAAA;QACAT,MAAA;MACA,GACAZ,IAAA,CAAAC,QAAA,IAAAA,QAAA,CAAAC,IAAA,IACAF,IAAA,CAAAjB,IAAA;QACA,IAAAA,IAAA,CAAAkC,OAAA;UACA,KAAApB,WAAA;QACA;UACAS,OAAA,CAAAD,KAAA,4CAAAtB,IAAA,CAAAmC,OAAA;QACA;MACA,GACAd,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,gEAAAA,KAAA;MACA;IACA;IACAiB,WAAA;MACA,KAAA/B,aAAA;QAAAC,KAAA;QAAAC,UAAA;MAAA;IACA;IACA8B,SAAA;MACAjB,OAAA,CAAAkB,GAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}