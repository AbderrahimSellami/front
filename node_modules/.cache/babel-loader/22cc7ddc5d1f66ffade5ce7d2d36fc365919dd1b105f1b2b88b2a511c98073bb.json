{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'NonDispoComponent',\n  data() {\n    return {\n      newNonDispo: {\n        date: null,\n        heure: null\n      },\n      nonDispos: [],\n      fields: [\"date\", \"heure\", \"actions\"]\n    };\n  },\n  mounted() {\n    this.fetchNonDispos();\n  },\n  methods: {\n    fetchNonDispos() {\n      fetch('http://127.0.0.1:8000/enseignant/nondispo/').then(response => response.json()).then(data => {\n        this.nonDispos = data.data;\n      }).catch(error => {\n        console.error('Une erreur s\\'est produite lors de la récupération des non-disponibilités:', error);\n      });\n    },\n    addNonDispo() {\n      if (this.newNonDispo.date !== null && this.newNonDispo.heure !== null) {\n        this.nonDispos.push({\n          date: this.newNonDispo.date,\n          heure: this.newNonDispo.heure\n        });\n        this.newNonDispo.date = null;\n        this.newNonDispo.heure = null;\n      }\n    },\n    removeNonDispo(id) {\n      fetch(`http://127.0.0.1:8000/enseignant/nondispo/${id}/`, {\n        method: 'DELETE'\n      }).then(response => {\n        if (!response.ok) {\n          throw new Error('La suppression a échoué.');\n        }\n        return response.json();\n      }).then(data => {\n        // Supprimer l'entrée du tableau côté client\n        this.nonDispos = this.nonDispos.filter(item => item.id !== id);\n      }).catch(error => {\n        console.error('Une erreur s\\'est produite lors de la suppression de la non-disponibilité:', error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","newNonDispo","date","heure","nonDispos","fields","mounted","fetchNonDispos","methods","fetch","then","response","json","catch","error","console","addNonDispo","push","removeNonDispo","id","method","ok","Error","filter","item"],"sources":["src/views/nondisponibilite.vue"],"sourcesContent":["<template>\n    <div>\n        <b-row>\n            <b-col>\n                <b-form-group label=\"Ajouter la Non Disponibilité\">\n                    <b-row>\n                        <b-col>\n                            <b-form-datepicker v-model=\"newNonDispo.date\" required></b-form-datepicker>\n                        </b-col>\n                        <b-col>\n                            <b-form-input v-model=\"newNonDispo.heure\" type=\"text\" placeholder=\"Heure\" required></b-form-input>\n                        </b-col>\n                        <b-col>\n                            <b-button variant=\"primary\" @click=\"addNonDispo\">Ajouter</b-button>\n                        </b-col>\n                    </b-row>\n                </b-form-group>\n            </b-col>\n        </b-row>\n        <br><br><br>\n        <b-table :items=\"nonDispos\" :fields=\"fields\">\n            <template #cell(actions)=\"row\">\n                <b-button size=\"sm\" variant=\"danger\" @click=\"removeNonDispo(row.item.id)\">\n                    Supprimer\n                </b-button>\n            </template>\n        </b-table>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'NonDispoComponent',\n\n    data() {\n        return {\n            newNonDispo: {\n                date: null,\n                heure: null\n            },\n            nonDispos: [],\n            fields: [\"date\", \"heure\", \"actions\"],\n        };\n    },\n    mounted() {\n        this.fetchNonDispos();\n    },\n    methods: {\n        fetchNonDispos() {\n            fetch('http://127.0.0.1:8000/enseignant/nondispo/')\n                .then(response => response.json())\n                .then(data => {\n                    this.nonDispos = data.data;\n                })\n                .catch(error => {\n                    console.error('Une erreur s\\'est produite lors de la récupération des non-disponibilités:', error);\n                });\n        },\n        addNonDispo() {\n            if (this.newNonDispo.date !== null && this.newNonDispo.heure !== null) {\n                this.nonDispos.push({\n                    date: this.newNonDispo.date,\n                    heure: this.newNonDispo.heure\n                });\n                this.newNonDispo.date = null;\n                this.newNonDispo.heure = null;\n            }\n        },\n        removeNonDispo(id) {\n            fetch(`http://127.0.0.1:8000/enseignant/nondispo/${id}/`, {\n                method: 'DELETE'\n            })\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error('La suppression a échoué.');\n                }\n                return response.json();\n            })\n            .then(data => {\n                // Supprimer l'entrée du tableau côté client\n                this.nonDispos = this.nonDispos.filter(item => item.id !== id);\n            })\n            .catch(error => {\n                console.error('Une erreur s\\'est produite lors de la suppression de la non-disponibilité:', error);\n            });\n        },\n    }\n};\n</script>\n"],"mappings":";AA+BA;EACAA,IAAA;EAEAC,KAAA;IACA;MACAC,WAAA;QACAC,IAAA;QACAC,KAAA;MACA;MACAC,SAAA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,cAAA;EACA;EACAC,OAAA;IACAD,eAAA;MACAE,KAAA,+CACAC,IAAA,CAAAC,QAAA,IAAAA,QAAA,CAAAC,IAAA,IACAF,IAAA,CAAAV,IAAA;QACA,KAAAI,SAAA,GAAAJ,IAAA,CAAAA,IAAA;MACA,GACAa,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,+EAAAA,KAAA;MACA;IACA;IACAE,YAAA;MACA,SAAAf,WAAA,CAAAC,IAAA,kBAAAD,WAAA,CAAAE,KAAA;QACA,KAAAC,SAAA,CAAAa,IAAA;UACAf,IAAA,OAAAD,WAAA,CAAAC,IAAA;UACAC,KAAA,OAAAF,WAAA,CAAAE;QACA;QACA,KAAAF,WAAA,CAAAC,IAAA;QACA,KAAAD,WAAA,CAAAE,KAAA;MACA;IACA;IACAe,eAAAC,EAAA;MACAV,KAAA,8CAAAU,EAAA;QACAC,MAAA;MACA,GACAV,IAAA,CAAAC,QAAA;QACA,KAAAA,QAAA,CAAAU,EAAA;UACA,UAAAC,KAAA;QACA;QACA,OAAAX,QAAA,CAAAC,IAAA;MACA,GACAF,IAAA,CAAAV,IAAA;QACA;QACA,KAAAI,SAAA,QAAAA,SAAA,CAAAmB,MAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAL,EAAA,KAAAA,EAAA;MACA,GACAN,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,+EAAAA,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}