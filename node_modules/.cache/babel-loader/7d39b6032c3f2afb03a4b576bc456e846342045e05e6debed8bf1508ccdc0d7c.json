{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'NonDispoComponent',\n  /* eslint-disable */\n  data() {\n    return {\n      newNonDispo: {\n        date: null,\n        heure: null\n      },\n      nonDispos: [],\n      fields: [\"date\", \"heure\", \"actions\"]\n    };\n  },\n  mounted() {\n    this.fetchNonDispos();\n  },\n  methods: {\n    fetchNonDispos() {\n      fetch('http://127.0.0.1:8000/enseignant/nondispo/').then(response => response.json()).then(data => {\n        this.nonDispos = data.data;\n      }).catch(error => {\n        console.error('Une erreur s\\'est produite lors de la récupération des non-disponibilités:', error);\n      });\n    },\n    addNonDispo() {\n      if (this.newNonDispo.date !== null && this.newNonDispo.heure !== null) {\n        fetch('http://127.0.0.1:8000/enseignant/nondispo/', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.newNonDispo)\n        }).then(response => {\n          if (!response.ok) {\n            throw new Error('La requête a échoué.');\n          }\n          return response.json();\n        }).then(data => {\n          this.nonDispos.push({\n            id: data.id,\n            date: this.newNonDispo.date,\n            heure: this.newNonDispo.heure\n          });\n          this.newNonDispo.date = null;\n          this.newNonDispo.heure = null;\n        }).catch(error => {\n          console.error('Une erreur s\\'est produite lors de l\\'ajout de la non-disponibilité:', error);\n        });\n      }\n    },\n    removeNonDispo(id) {\n      fetch(`http://127.0.0.1:8000/enseignant/nondispo/${id}/`, {\n        method: 'DELETE'\n      }).then(response => {\n        if (!response.ok) {\n          throw new Error('La suppression a échoué.');\n        }\n        return response.json();\n      }).then(data => {\n        // Supprimer l'entrée du tableau côté client\n        this.nonDispos = this.nonDispos.filter(item => item.id !== id);\n      }).catch(error => {\n        console.error('Une erreur s\\'est produite lors de la suppression de la non-disponibilité:', error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","newNonDispo","date","heure","nonDispos","fields","mounted","fetchNonDispos","methods","fetch","then","response","json","catch","error","console","addNonDispo","method","headers","body","JSON","stringify","ok","Error","push","id","removeNonDispo","filter","item"],"sources":["src/views/nondisponibilite.vue"],"sourcesContent":["<template>\n    <div>\n      <b-row>\n        <b-col>\n          <b-form-group label=\"Ajouter la Non Disponibilité\">\n            <b-row>\n              <b-col>\n                <b-form-datepicker v-model=\"newNonDispo.date\" required></b-form-datepicker>\n              </b-col>\n              <b-col>\n                <b-form-input v-model=\"newNonDispo.heure\" type=\"text\" placeholder=\"Heure\" required></b-form-input>\n              </b-col>\n              <b-col>\n                <b-button variant=\"primary\" @click=\"addNonDispo\">Ajouter</b-button>\n              </b-col>\n            </b-row>\n          </b-form-group>\n        </b-col>\n      </b-row>\n      <br><br><br>\n      <b-table :items=\"nonDispos\" :fields=\"fields\">\n        <template #cell(actions)=\"row\">\n          <b-button size=\"sm\" variant=\"danger\" @click=\"removeNonDispo(row.item.id)\">\n            Supprimer\n          </b-button>\n        </template>\n      </b-table>\n    </div>\n  </template>\n  \n  <script>\n  export default {\n    name: 'NonDispoComponent',\n  \n    /* eslint-disable */\n    data() {\n      return {\n        newNonDispo: {\n          date: null,\n          heure: null\n        },\n        nonDispos: [],\n        fields: [\"date\", \"heure\", \"actions\"],\n      };\n    },\n    mounted() {\n      this.fetchNonDispos();\n    },\n    methods: {\n      fetchNonDispos() {\n        fetch('http://127.0.0.1:8000/enseignant/nondispo/')\n          .then(response => response.json())\n          .then(data => {\n            this.nonDispos = data.data;\n          })\n          .catch(error => {\n            console.error('Une erreur s\\'est produite lors de la récupération des non-disponibilités:', error);\n          });\n      },\n      addNonDispo() {\n        if (this.newNonDispo.date !== null && this.newNonDispo.heure !== null) {\n          fetch('http://127.0.0.1:8000/enseignant/nondispo/', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(this.newNonDispo)\n          })\n          .then(response => {\n            if (!response.ok) {\n              throw new Error('La requête a échoué.');\n            }\n            return response.json();\n          })\n          .then(data => {\n            this.nonDispos.push({\n              id: data.id, \n              date: this.newNonDispo.date,\n              heure: this.newNonDispo.heure\n            });\n            this.newNonDispo.date = null;\n            this.newNonDispo.heure = null;\n          })\n          .catch(error => {\n            console.error('Une erreur s\\'est produite lors de l\\'ajout de la non-disponibilité:', error);\n          });\n        }\n      },\n      removeNonDispo(id) {\n        fetch(`http://127.0.0.1:8000/enseignant/nondispo/${id}/`, {\n          method: 'DELETE'\n        })\n        .then(response => {\n          if (!response.ok) {\n            throw new Error('La suppression a échoué.');\n          }\n          return response.json();\n        })\n        .then(data => {\n          // Supprimer l'entrée du tableau côté client\n          this.nonDispos = this.nonDispos.filter(item => item.id !== id);\n        })\n        .catch(error => {\n          console.error('Une erreur s\\'est produite lors de la suppression de la non-disponibilité:', error);\n        });\n      },\n    }\n  };\n  </script>\n  "],"mappings":";AA+BA;EACAA,IAAA;EAEA;EACAC,KAAA;IACA;MACAC,WAAA;QACAC,IAAA;QACAC,KAAA;MACA;MACAC,SAAA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,cAAA;EACA;EACAC,OAAA;IACAD,eAAA;MACAE,KAAA,+CACAC,IAAA,CAAAC,QAAA,IAAAA,QAAA,CAAAC,IAAA,IACAF,IAAA,CAAAV,IAAA;QACA,KAAAI,SAAA,GAAAJ,IAAA,CAAAA,IAAA;MACA,GACAa,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,+EAAAA,KAAA;MACA;IACA;IACAE,YAAA;MACA,SAAAf,WAAA,CAAAC,IAAA,kBAAAD,WAAA,CAAAE,KAAA;QACAM,KAAA;UACAQ,MAAA;UACAC,OAAA;YACA;UACA;UACAC,IAAA,EAAAC,IAAA,CAAAC,SAAA,MAAApB,WAAA;QACA,GACAS,IAAA,CAAAC,QAAA;UACA,KAAAA,QAAA,CAAAW,EAAA;YACA,UAAAC,KAAA;UACA;UACA,OAAAZ,QAAA,CAAAC,IAAA;QACA,GACAF,IAAA,CAAAV,IAAA;UACA,KAAAI,SAAA,CAAAoB,IAAA;YACAC,EAAA,EAAAzB,IAAA,CAAAyB,EAAA;YACAvB,IAAA,OAAAD,WAAA,CAAAC,IAAA;YACAC,KAAA,OAAAF,WAAA,CAAAE;UACA;UACA,KAAAF,WAAA,CAAAC,IAAA;UACA,KAAAD,WAAA,CAAAE,KAAA;QACA,GACAU,KAAA,CAAAC,KAAA;UACAC,OAAA,CAAAD,KAAA,yEAAAA,KAAA;QACA;MACA;IACA;IACAY,eAAAD,EAAA;MACAhB,KAAA,8CAAAgB,EAAA;QACAR,MAAA;MACA,GACAP,IAAA,CAAAC,QAAA;QACA,KAAAA,QAAA,CAAAW,EAAA;UACA,UAAAC,KAAA;QACA;QACA,OAAAZ,QAAA,CAAAC,IAAA;MACA,GACAF,IAAA,CAAAV,IAAA;QACA;QACA,KAAAI,SAAA,QAAAA,SAAA,CAAAuB,MAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAH,EAAA,KAAAA,EAAA;MACA,GACAZ,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,+EAAAA,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}